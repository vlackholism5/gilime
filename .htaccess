# Gilaime v0.6-4: "public/" 구조 흉내내기 (XAMPP 기본: 프로젝트 루트가 webroot)
# - URL은 /admin/* 그대로 유지
# - 실제 파일은 /public/admin/*

Options -Indexes

# 1) 민감 폴더 직접 접근 차단
RewriteEngine On
RewriteRule ^(app|storage|tools|sql)/ - [F,L]

# 2) /admin/* -> /public/admin/*
RewriteRule ^admin/(.*)$ public/admin/$1 [L]

# 3) /admin -> /public/admin/index.php
RewriteRule ^admin$ public/admin/index.php [L]

# 4) /user/* -> /public/user/* (v1.4 MVP2)
RewriteRule ^user/(.*)$ public/user/$1 [L]
RewriteRule ^user$ public/user/home.php [L]

# 5) /api/* -> public/api/index.php (trace + debug, GILIME_DEBUG=1 when needed)
# 5a) /api/route/suggest_stops -> 전용 엔드포인트
RewriteRule ^api/route/suggest_stops$ public/api/route/suggest_stops.php [L,QSA]
RewriteRule ^api/(.*)$ public/api/index.php?path=$1 [L,QSA]
RewriteRule ^api$ public/api/index.php?path= [L,QSA]
