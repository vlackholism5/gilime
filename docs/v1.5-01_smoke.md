# v1.5-01 Smoke Checklist (Observability baseline)

## 1) Subscribe toggle → app_subscriptions updated_at

- /user/routes.php에서 한 노선에 대해 Subscribe 클릭.
- DB: `SELECT user_id, target_id, is_active, updated_at FROM app_subscriptions WHERE is_active = 1 ORDER BY updated_at DESC LIMIT 5;`
- 해당 target_id의 행이 있고, updated_at이 방금 시간대인지 확인.
- Unsubscribe 후 다시 Subscribe해도 updated_at이 갱신되는지 확인.

## 2) /user/alerts.php → app_alert_deliveries 증가 (신규만)

- `SELECT COUNT(*) FROM app_alert_deliveries;` 로 현재 건수 기록.
- /user/alerts.php 접속(필터/페이지 포함 가능).
- 동일 쿼리로 건수 재확인: **이번에 새로 노출된 이벤트에 대해서만** delivery가 없었다면 1건씩 증가. 이미 본 이벤트는 UNIQUE로 인해 INSERT가 아닌 UPDATE이므로 건수는 그대로.
- (정리: “새로 노출된 이벤트 수만큼만” 증가하는지 확인.)

## 3) Server log line (환경 허용 시)

- Subscribe 토글 후: 서버 error_log에 `OPS subscribe_toggle user_id=... target_id=... is_active=...` 한 줄 존재 여부 확인.
- Alerts 페이지 로드 후: `OPS delivery_written user_id=... alert_event_id=... channel=web status=shown` 로그 존재 여부 확인.
- 로그 경로/권한이 없으면 **확인 필요**로 남기고, 1)·2)만으로도 통과로 간주.
