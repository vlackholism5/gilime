# v1.1-04~06 스프린트 산출물

## 1) 변경 파일 목록
- `public/admin/route_review.php`
- `public/admin/doc.php`
- `docs/v1.1-04~06_스프린트_산출물.md` (본 문서)

## 2) 작업 항목별 완료 여부

### (1) route_review 단축키 시스템 완성 (필수)
- [x] A. n = 다음 노선 검수 버튼 실행 (즉시 이동)
- [x] B. t = jump_next 토글 ON/OFF
- [x] C. a/r = 선택된 row approve/reject (pending row만)
- [x] D. j/k = 후보 행 위/아래 이동 (선택 row 변경)
- [x] E. 선택 row 시각 강조 (cand-selected 배경색)
- [x] F. INPUT/TEXTAREA/SELECT 포커스 시 단축키 무시 유지

### (2) route_review "작업 흐름 고정" (필수)
- [x] A. 페이지 진입 시 첫 pending row 자동 선택 (data-pending + focus_cand_id)
- [x] B. Approve/Reject 성공 후: jump_next=1이면 다음 노선 이동; jump_next=0이면 같은 노선 유지 + focus_cand_id로 다음 pending row 자동 선택
- [x] C. Candidates가 0인데 PENDING>0이면 안내 문구 1줄 유지

### (3) doc.php "오늘 할 일" 강화 (필수)
- [x] A. "오늘 작업 시작" 버튼 1개: pending_risky 가장 많은 route_label로 이동 (quick_mode=1, show_advanced=0)
- [x] B. 기존 Next Actions Summary 1쿼리 재사용 (추가 SELECT 없음)

### (4) 운영 리듬 최소 자동화 (선택)
- [x] A. doc.php에서 "마지막 검수 시각" 표시 (shuttle_doc_job_log 1회 SELECT)
- [x] B. 최근 5 job history 표 유지

## 3) 핵심 구현 포인트 (15줄 이내)
- **route_review**: build_route_review_redirect_query에 focus_cand_id 추가. Approve/Reject 후 jump_next=0이면 동일 노선 redirect 시 "첫 pending id" 1건 SELECT하여 URL에 focus_cand_id 붙임. 각 행에 data-cand-id, data-pending(pending만) 부여. JS: URL의 focus_cand_id 있으면 해당 행 선택, 없으면 첫 pending 행(또는 첫 행) 선택. j/k로 선택 행 위/아래 이동. n=다음 노선 이동, t=jump_next 토글.
- **doc.php**: nextActionsSummary[0]으로 pending_risky 최대 노선 사용, "오늘 작업 시작" 버튼으로 route_review 진입. shuttle_doc_job_log에서 updated_at 1건 조회해 "마지막 검수 시각" 메타에 표시.

## 4) 브라우저 스모크 5개
1. **route_review 진입** → Candidates 1개 이상일 때 첫 pending 행이 자동 선택(배경 강조)되는지 확인.
2. **j/k** → 선택 행에서 j 누르면 다음 행, k 누르면 이전 행으로 선택이 바뀌는지 확인.
3. **a/r** → 선택된 pending 행에서 a로 Approve 또는 r로 Reject 시 폼 제출 후, jump_next=0이면 같은 노선 유지되고 다음 pending 행이 선택된 상태로 리로드되는지 확인.
4. **n** → n 키로 다음 노선으로 즉시 이동하는지 확인 (다음 노선 없으면 동일 유지).
5. **doc.php** → "오늘 작업 시작" 버튼 클릭 시 pending_risky 최대 노선 route_review(quick_mode=1)로 이동하는지, 메타에 "마지막 검수 시각"이 표시되는지 확인.

## 5) Git commit 메시지 (최대 2개)
- `feat(v1.1-04): operator speed pack (shortcuts + next + start button)`
