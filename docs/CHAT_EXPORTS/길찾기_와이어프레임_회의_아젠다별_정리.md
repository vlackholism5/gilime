# 길찾기 UI/UX 와이어프레임 회의 — 아젠다별 정리

**출처:** 길찾기 UI UX 와이어프레임 설계 회의 스크립트  
**목적:** 아젠다별 결정 사항·산출물 요약. Phase A/B 실행 시 SOT 참조용.

---

## 아젠다 1. IA 및 기본 와이어 (네이버지도 참조)

- **목표:** 네이버지도 대중교통 UI 참조, 길라임용 화면 구조 정의
- **가정:** 모바일 앱(Android 1st), 대중교통 탭 기본, MVP=버스/지하철/임시셔틀 경로+실시간 도착
- **산출:** IA 트리
  - HOME: 검색창, 최근검색, 지도뷰, 하단 네비
  - ROUTE_RESULT: 경로 요약 바, 필터 탭, 정렬, 경로 카드 리스트, 안내 시작
  - GUIDANCE_MODE: 안내 상태 바, 지도 내비, 현재 스텝 패널, 종료
  - STOP_DETAIL(바텀시트): 정류장명, 정류장ID, 노선 리스트, 실시간 도착, 더보기

---

## 아젠다 2. User 화면 설계 (와이어 ASCII)

- **화면 1 — 홈:** 검색창 고정 상단, 최근검색 삭제 가능, 지도 현재 위치 중심
- **화면 2 — 경로 결과:** 출발→도착, 버스/지하철/환승 탭, 오늘 출발 시각·정렬, 경로 카드(최적/시간/요금, 세그먼트, 바로 안내시작)
- **상태:** 선택됨/실시간 지연/여유/임시셔틀 포함(보라 배지)
- **화면 3 — 정렬 옵션 바텀시트:** 최적경로/최소시간/최소환승/최소도보/빠른도착, 계단회피 토글
- **화면 4 — 안내 중:** 지도 네비, 현재 단계 패널, 도보(점선)/버스(실선)/지하철/임시셔틀 시각 구분
- **화면 5 — 정류장 상세 바텀시트:** 정류장명, 정류장ID, 노선·도착정보, 더보기
- **컴포넌트:** RouteCard, TransitBadge, ArrivalTag, BottomSheet, MapOverlay, FloatingTimer
- **상태 머신:** IDLE → SEARCHING → ROUTE_LOADED → GUIDING → END

---

## 아젠다 3. 길라임 차별화 (이슈·셔틀·구독·재탐색)

- **진입점:** 이슈 선택 또는 검색
- **경로 계산:** 임시셔틀 포함 재계산
- **안내:** 구독 기반 지속 추적
- **상태:** 이슈 발생 시 자동 재탐색 제안
- **UI 반영:** 임시셔틀 자동 감지(노선 배지 강조), 이슈 우선(상단 배너), 구독("이 노선 구독"), 실시간 재탐색(Floating 버튼)
- **데이터 흐름:** USER_INPUT → ISSUE_CHECK → ROUTE_ENGINE(NORMAL_TRANSIT, SHUTTLE_OVERLAY) → SCORE_ENGINE(TIME, TRANSFER, ISSUE_IMPACT) → RESULT_RENDER
- **정렬 확장:** "이슈 최소 영향순" 추가
- **상태 추가:** ISSUE_DETECTED, REROUTE_AVAILABLE, SUBSCRIBED_ROUTE, SHUTTLE_ACTIVE

---

## 아젠다 4. PRD (MVP 20일 기준)

- **제품 정의:** 교통 이슈 시 임시셔틀 포함 대체 경로 제공, 이슈 기반 재탐색+구독
- **문제:** 지하철 중단 시 대체 경로 혼란, 셔틀 정보 분산, 실시간 이슈 반영 부족
- **포함:** 출발/도착 검색, 이슈 표시, 임시셔틀 포함 경로, 정렬(최적/최소시간/최소환승), 구독, 안내 모드
- **제외(MVP+):** AI 예측, 실시간 혼잡도, 전국 확대
- **KPI:** 경로 응답 ≤2초, 재탐색 성공 ≥95%, 구독 전환 ≥15%, 안내 시작률 40%
- **MVP vs MVP+:** 자동 재탐색(부분→실시간), 혼잡도·AI(MVP+)

---

## 아젠다 5. Flutter 컴포넌트 구조

- **디렉토리:** lib/ core, features(search/route/issue/subscription/guidance), widgets, services
- **주요 위젯:** SearchBarWidget, IssueBannerWidget, RouteCardWidget, TransitBadgeWidget, MapOverlayWidget, GuidancePanelWidget
- **상태관리:** Riverpod or Bloc, RouteState(loading/loaded/rerouting/error)

---

## 아젠다 6. Admin 이슈·셔틀 설계

- **목적:** 이슈/임시셔틀 등록·수정, 정류장 순서 무결성
- **이슈 CRUD:** 제목, 심각도, 시작/종료, 영향 노선·모드, 지도 선택(선택), 셔틀 노선 추가(정류장 순서, 배차)
- **DB 요약:** issues(id, title, start_at, end_at, affected_lines), shuttle_routes(issue_id, route_name), shuttle_stops(route_id, stop_order, stop_id)
- **Stop Sequence Builder:** 2패널(검색/순서), 드래그 재정렬, stop_order 연속·중복 stop_id 금지, 최소 2정류장
- **Publish:** Activate/Deactivate, ConfirmModal, 서버 재검증

---

## 아젠다 7. 경로 스코어링 알고리즘

- **그래프:** Node=정류장, Edge=이동(버스/지하철/셔틀/도보), Weight=시간
- **Score:** T + α·TransferPenalty + β·IssueImpact + γ·WalkCost + δ·ReliabilityPenalty
- **TransferPenalty:** (환승횟수)^1.2
- **IssueImpact:** Σ(edge.issue_severity_weight × edge.duration_ratio), severity weight: low=1, medium=3, high=6, critical=10
- **WalkCost:** total_walk_m/400
- **셔틀:** issue_active 시 shuttle_edges 그래프에 추가
- **재탐색 트리거:** 이슈 업데이트, 지연 발생, 사용자 요청

---

## 아젠다 8. 스코어 시뮬레이션 (Test Set A~D)

- **문서:** Route_Scoring_Simulation_Model_v1
- **계수 고정:** α=5, β=8, γ=3, δ=0(MVP)
- **입력:** RouteCandidate JSON(total_min, transfers, walk_m, segments[type, duration_min, issue_exposed, issue_severity])
- **테스트 세트 A~D:** 기대 Score·II·정렬(best/fastest/least_issue/least_transfer) 정답표 확정
- **검증:** 구현 후 동일 입력→동일 출력, API 응답에 score/issue_impact 포함

---

## 아젠다 9. API Spec v0.1 (MVP)

- **공통:** Base /api/v1, JSON, ok/data/error/meta(trace_id, server_time), 에러 코드(VALIDATION_ERROR, NOT_FOUND 등)
- **엔드포인트:** GET /places/suggest, GET/POST /issues, POST /routes/search, POST/GET /guidance/*, POST/GET/DELETE /subscriptions
- **Admin:** POST /admin/issues, /admin/shuttles/routes, PUT .../stops, X-ADMIN-TOKEN 보호
- **Publish:** POST .../issues/{id}/activate|deactivate, .../shuttles/routes/{id}/activate|deactivate, 서버 검증(필수값·stop 무결성)

---

## 아젠다 10. Admin ERD (MVP)

- **테이블:** issues(severity, status=draft/active/ended), issue_lines(issue_id, line_code), issue_modes(issue_id, mode), shuttle_routes(issue_id, route_name, headway_min, service_hours, status), shuttle_stops(shuttle_route_id, stop_order, stop_id, stop_name, lat, lng)
- **제약:** UNIQUE(issue_id, line_code), UNIQUE(issue_id, route_name), UNIQUE(shuttle_route_id, stop_order), UNIQUE(shuttle_route_id, stop_id)
- **검증 SQL:** stop_order 연속성, stop_id 중복, active 이슈 기간

---

## 아젠다 11. Phase A 설계 Lock

- **산출물 7종:** User 와이어 v2, Admin 와이어 v2, PRD 20일, Flutter 구조, 스코어링 모델·시뮬레이션, Admin ERD, API 구현 플랜, MVP_20day_OrderList
- **규칙:** 설계 Lock 완료 전 구현 금지, docs/SOT에 생성, Lock 조건·검증 기준 명시

---

## 아젠다 12. Phase B 구현

- **DB:** migration v0.8-xx, validate 쿼리
- **API:** /api/v1 라우팅, ApiResponder, IssueService, ShuttleService, RouteService(스코어링 v1 준수), Guidance/Subscription 최소, Admin 토큰
- **검증:** verify_scoring_model_v1.php(Test Set A~D), curl·DB 체크리스트

---

## 연계 문서

- Phase A SOT: docs/SOT/ 내 Gilime_User_Wireframe_MVP_v2.md, Gilime_Admin_Wireframe_MVP_v2.md, Route_Scoring_Simulation_Model_v1.md, PRD_MVP_20day.md, Gilime_Admin_ERD_MVP_v1.md, 11_API_V1_IMPL_PLAN.md, MVP_20day_OrderList.md
- 실행 플랜: .cursor/plans/ 길찾기_와이어프레임_회의_정리_및_실행_플랜
